var e=Object.assign;import{p as t,r as n,q as s,v as a,l as r,a as i,u as o,b as l,c,D as d,A as h,V as u,T as m,S as p,d as g,e as f,f as v,g as E,t as w,P as y}from"./vendor.24fb0d57.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const s=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,r)=>{const i=new URL(e,s);if(self[t].moduleMap[i])return n(self[t].moduleMap[i]);const o=new Blob([`import * as m from '${i}';`,`${t}.moduleMap['${i}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(o),onerror(){r(new Error(`Failed to import: ${e}`)),a(l)},onload(){n(self[t].moduleMap[i]),a(l)}});document.head.appendChild(l)})),self[t].moduleMap={}}}("/dash/assets/");const b=({gridTemplate:e,children:t})=>n.createElement("div",{className:"tile-grid",style:{gridTemplate:e}},t);b.propTypes={gridTemplate:t.string.isRequired,children:t.node.isRequired};const _=({children:e,row:t,col:s})=>n.createElement("div",{className:"tile",style:{gridRow:t,gridColumn:s}},e);_.propTypes={children:t.node.isRequired,row:t.oneOfType([t.number,t.string]).isRequired,col:t.oneOfType([t.number,t.string]).isRequired};var x,C;(C=x||(x={}))[C.FIELD_VIEW=0]="FIELD_VIEW",C[C.GRAPH_VIEW=1]="GRAPH_VIEW",C[C.CONFIG_VIEW=2]="CONFIG_VIEW",C[C.TELEMETRY_VIEW=3]="TELEMETRY_VIEW",C[C.CAMERA_VIEW=4]="CAMERA_VIEW",C[C.OPMODE_VIEW=5]="OPMODE_VIEW",C[C.LOGGING_VIEW=6]="LOGGING_VIEW";const M=s.div.attrs((e=>({className:"flex flex-col h-full bg-white bg-opacity-75 overflow-hidden transition-shadow "+(e.isUnlocked?"shadow-md rounded-md select-none":"")})))``,N=s.h2.attrs((e=>({className:"text-xl w-full px-4 py-2 font-medium "+(e.isDraggable?"grab-handle":"")})))``,S=s.div.attrs((e=>({className:`px-4 ${e.className}`})))`
  flex: 1;
  overflow: auto;
`,T=s.div.attrs({className:"flex items-center mr-3 space-x-1"})``,O=s.div.attrs({className:"w-8 h-8 flex-center"})``,R=s.button.attrs((e=>({className:`icon-btn w-8 h-8 ${e.className}`})))``;class k extends n.Component{constructor(e){super(e),this.state={selected:this.props.selected||[],uuid:a()}}handleChange(e,t){e.target.checked?this.setState({selected:[...this.state.selected,t]},(()=>this.props.onChange(this.state.selected))):this.setState({selected:this.state.selected.filter((e=>t!==e))},(()=>this.props.onChange(this.state.selected)))}render(){return n.createElement("table",{className:"overflow-y-scroll"},n.createElement("tbody",null,this.props.arr.filter((e=>!this.props.exclude||-1===this.props.exclude.indexOf(e))).map((e=>n.createElement("tr",{key:e},n.createElement("td",null,n.createElement("input",{id:`multiple-checkbox-${this.state.uuid}-${e}`,className:"rounded",type:"checkbox",onChange:t=>this.handleChange(t,e),checked:-1!==this.state.selected.indexOf(e)})),n.createElement("td",null,n.createElement("label",{htmlFor:`multiple-checkbox-${this.state.uuid}-${e}`},e)))))))}}function L(e,t){const n=Math.round(e*t);return(n+.5*Math.sign(e-n))/t}k.propTypes={arr:t.arrayOf(t.string).isRequired,selected:t.arrayOf(t.string),exclude:t.arrayOf(t.string),onChange:t.func},CanvasRenderingContext2D.prototype.getScalingFactors=function(){let e;if("function"==typeof this.getTransform)e=this.getTransform();else{if(void 0===this.mozCurrentTransform)throw new Error("unable to find canvas transform");t=this.mozCurrentTransform,e=window.DOMMatrix.fromFloat64Array(Float64Array.from(t))}var t;const{a:n,b:s,c:a,d:r}=e;return{scalingX:Math.sqrt(n*n+a*a),scalingY:Math.sqrt(s*s+r*r)}},CanvasRenderingContext2D.prototype.fineMoveTo=function(e,t){const{scalingX:n,scalingY:s}=this.getScalingFactors();this.moveTo(L(e,n),L(t,s))},CanvasRenderingContext2D.prototype.fineLineTo=function(e,t){const{scalingX:n,scalingY:s}=this.getScalingFactors();this.lineTo(L(e,n),L(t,s))};const I={windowMs:5e3,colors:["#2979ff","#dd2c00","#4caf50","#7c4dff","#ffa000"],lineWidth:2,padding:15,keySpacing:4,keyLineLength:12,gridLineWidth:1,gridLineColor:"rgb(120, 120, 120)",fontSize:14,textColor:"rgb(50, 50, 50)",maxTicks:7};function A(e,t){const n=Math.floor(Math.log10(e)),s=e/Math.pow(10,n);let a;return a=t?s<1.5?1:s<3?2:s<7?5:10:s<=1?1:s<=2?2:s<=5?5:10,a*Math.pow(10,n)}function D(e,t,n){const s=A(t-e,!1),a=A(s/(n-1),!0);return{min:Math.floor(e/a)*a,max:(Math.floor(t/a)+1)*a,spacing:a}}function z(e,t){let n=t.length>3?t[2]-t[1]:t[1]-t[0];Math.abs(n)>1&&e!==Math.floor(e)&&(n=e-Math.floor(e));const s=Math.log10(Math.abs(n));let a="";if(0!==e){let t=-1*Math.floor(s);t=Math.max(Math.min(t,20),0),a=e.toFixed(t)}else a="0";return a}function P(e,t,n,s,a){return s+(a-s)/(n-t)*(e-t)}class V{constructor(e,t){this.canvas=e,this.ctx=e.getContext("2d"),this.options=r.cloneDeep(I),Object.assign(this.options,t||{}),this.reset()}reset(){this.data={},this.beginGraphNowMs=Number.NaN,this.beginRenderTimeMs=Number.NaN}add(e){const t=this.options;for(const n of e){const e=n.reduce(((e,{name:t,value:n})=>"time"===t?n:e),Number.NaN);for(const s of n){const{name:n,value:a}=s;if("time"===n)continue;if(isNaN(a))continue;Object.prototype.hasOwnProperty.call(this.data,n)||(this.data[n]={ts:[],vs:[],color:t.colors[Object.keys(this.data).length%t.colors.length]});const{ts:r,vs:i}=this.data[n];r.push(e),i.push(a)}}if(isNaN(this.beginGraphNowMs)&&e.length>0){const t=e[e.length-1].reduce(((e,{name:t,value:n})=>"time"===t?n:e),Number.NaN);this.beginGraphNowMs=t-250,this.beginRenderTimeMs=Date.now()}}getYAxisScaling(){const[e,t]=Object.keys(this.data).reduce(((e,t)=>this.data[t].vs.reduce((([e,t],n)=>[Math.min(n,e),Math.max(n,t)]),e)),[Number.MAX_VALUE,Number.MIN_VALUE]);return Math.abs(e-t)<1e-6?D(e-1,t+1,this.options.maxTicks):D(e,t,this.options.maxTicks)}render(){const e=this.options;if(this.canvas.width=this.canvas.width,isNaN(this.beginGraphNowMs))return!1;const t=this.beginGraphNowMs+(Date.now()-this.beginRenderTimeMs);for(const i of Object.keys(this.data)){const{ts:n,vs:s}=this.data[i];for(;n.length>0&&n[0]+e.windowMs+250<t;)n.shift(),s.shift()}let n=!0;for(const{ts:i}of Object.values(this.data))if(0!==i.length){n=!1;break}if(n)return!1;this.ctx.scale(devicePixelRatio,devicePixelRatio),this.ctx.font=`${e.fontSize}px "Roboto", sans-serif`,this.ctx.textBaseline="middle",this.ctx.textAlign="left",this.ctx.lineWidth=e.lineWidth/devicePixelRatio;const s=this.canvas.width/devicePixelRatio,a=this.canvas.height/devicePixelRatio;this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,s,a);const r=this.renderKey(0,0,s);return this.renderGraph(0,r,s,a-r,t),!0}renderKey(e,t,n){const s=this.options;this.ctx.save();const a=Object.keys(this.data),r=a.length,i=r*s.fontSize+(r-1)*s.keySpacing;for(let o=0;o<r;o++){const r=t+o*(s.fontSize+s.keySpacing)+s.fontSize/2,i=a[o],{color:l}=this.data[i],c=e+(n-(this.ctx.measureText(i).width+s.keyLineLength+s.keySpacing))/2;this.ctx.strokeStyle=l,this.ctx.beginPath(),this.ctx.fineMoveTo(c,r),this.ctx.fineLineTo(c+s.keyLineLength,r),this.ctx.stroke(),this.ctx.fillStyle=s.textColor,this.ctx.fillText(i,c+s.keyLineLength+s.keySpacing,r)}return this.ctx.restore(),i}renderGraph(e,t,n,s,a){const r=this.options,i=s-2*r.padding,o=this.getYAxisScaling(),l=function(e){const t=[];for(let s=e.min;s<=e.max;s+=e.spacing)t.push(s);const n=[];for(let s=0;s<t.length;s++){const e=z(t[s],t);n.push(e)}return n}(o),c=this.renderAxisLabels(e+r.padding,t+r.padding,i,l),d=n-c-3*r.padding;this.renderGridLines(e+c+2*r.padding,t+r.padding,d,i,5,l.length),this.renderGraphLines(e+c+2*r.padding,t+r.padding,d,i,o,a)}renderAxisLabels(e,t,n,s){this.ctx.save();let a=0;for(let i=0;i<s.length;i++){const e=this.ctx.measureText(s[i]).width;e>a&&(a=e)}this.ctx.textAlign="right",this.ctx.fillStyle=this.options.textColor;const r=n/(s.length-1);e+=a;for(let i=0;i<s.length;i++)this.ctx.fillText(s[i],e,t+(s.length-i-1)*r);return this.ctx.restore(),a}renderGridLines(e,t,n,s,a,r){this.ctx.save(),this.ctx.strokeStyle=this.options.gridLineColor,this.ctx.lineWidth=this.options.gridLineWidth/devicePixelRatio;const i=n/(a-1),o=s/(r-1);for(let l=0;l<a;l++){const n=e+i*l;this.ctx.beginPath(),this.ctx.fineMoveTo(n,t),this.ctx.fineLineTo(n,t+s),this.ctx.stroke()}for(let l=0;l<r;l++){const s=t+o*l;this.ctx.beginPath(),this.ctx.fineMoveTo(e,s),this.ctx.fineLineTo(e+n,s),this.ctx.stroke()}this.ctx.restore()}renderGraphLines(e,t,n,s,a,r){const i=this.options;this.ctx.lineWidth=i.lineWidth,this.ctx.save(),this.ctx.translate(e,t),this.ctx.rect(0,0,n,s),this.ctx.clip(),this.ctx.beginPath(),Object.keys(this.data).forEach(((e,t)=>{const{ts:o,vs:l}=this.data[e];if(0===o.length)return;const c=i.colors[t%i.colors.length];this.ctx.beginPath(),this.ctx.strokeStyle=c,this.ctx.fineMoveTo(P(o[0]-r+i.windowMs,0,i.windowMs,0,n),P(l[0],a.min,a.max,s,0));for(let d=1;d<o.length;d++)this.ctx.fineLineTo(P(o[d]-r+i.windowMs,0,i.windowMs,0,n),P(l[d],a.min,a.max,s,0));this.ctx.stroke()})),this.ctx.restore()}}class U extends n.Component{constructor(e){super(e),this.resize=this.resize.bind(this),this.containerRef=n.createRef(),this.resizeObserver=new ResizeObserver((e=>{for(let t of e)t.target===this.containerRef.current&&this.resize()}))}componentDidMount(){this.resize(),this.resizeObserver.observe(this.containerRef.current)}componentWillUnmount(){this.resizeObserver.disconnect()}resize(){var e,t;const n=this.props.innerRef.current;n.width=this.containerRef.current.clientWidth*devicePixelRatio,n.height=this.containerRef.current.clientHeight*devicePixelRatio,n.style.width=n.width/devicePixelRatio+"px",n.style.height=n.height/devicePixelRatio+"px",null==(t=(e=this.props).onResize)||t.call(e)}render(){return n.createElement("div",{style:{width:"100%",height:this.props.containerHeight},ref:this.containerRef},n.createElement("canvas",{ref:this.props.innerRef}))}}U.defaultProps={containerHeight:"100%"},U.propTypes={innerRef:t.any.isRequired,onResize:t.func,containerHeight:t.string};const H=n.forwardRef(((t,s)=>n.createElement(U,e({innerRef:s},t))));H.displayName="AutoFitCanvas";class G extends n.PureComponent{constructor(e){super(e),this.canvasRef=n.createRef(),this.renderGraph=this.renderGraph.bind(this),this.unsubs=[],this.state={graphEmpty:!1}}componentDidMount(){this.graph=new V(this.canvasRef.current,this.props.options),this.renderGraph()}componentWillUnmount(){this.requestId&&cancelAnimationFrame(this.requestId)}componentDidUpdate(e){this.props.data!==e.data&&this.graph.add(this.props.data)}renderGraph(){!this.props.paused&&this.graph&&(this.setState((()=>({graphEmpty:!this.graph.render()}))),this.requestId=requestAnimationFrame(this.renderGraph))}render(){return n.createElement("div",{className:"h-full flex-center"},n.createElement("div",{className:(this.state.graphEmpty?"hidden":"")+" w-full h-full"},n.createElement(H,{ref:this.canvasRef})),n.createElement("div",{className:"absolute top-0 left-0 w-full h-full flex-center pointer-events-none"},this.state.graphEmpty&&n.createElement("p",{className:"text-center"},"No content to graph")))}}G.propTypes={data:t.arrayOf(t.any).isRequired,options:t.object.isRequired,paused:t.bool.isRequired};class W extends n.Component{constructor(e){super(e),this.inputRef=n.createRef(),this.handleChange=this.handleChange.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.state={value:e.value}}componentDidUpdate(){this.inputRef.current.setCustomValidity(this.props.valid?"":"Invalid input"),this.props.value!==this.props.validate(this.state.value).value&&this.setState({value:this.props.value})}handleChange(e){this.setState({value:e.target.value});const t=this.props.validate(e.target.value);t&&this.props.onChange(t)}handleKeyDown(e){this.props.onSave&&13===e.keyCode&&this.props.onSave()}render(){return n.createElement("input",{className:"bg-gray-100 rounded border border-gray-200 px-3 py-1 "+(this.props.valid?"":"border-red-500 focus:ring-red-500 focus:border-red-500"),ref:this.inputRef,type:"text",size:15,value:this.state.value,onChange:this.handleChange,onKeyDown:this.handleKeyDown})}}function $(t){return n.createElement("svg",e({fill:"#000000",height:48,viewBox:"0 0 24 24",width:48,xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{fill:"currentColor",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"}),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}function F(t){return n.createElement("svg",e({fill:"currentColor",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}function B(t){return n.createElement("svg",e({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"black",width:"18px",height:"18px"},t),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M8 5v14l11-7z"}))}function j(t){return n.createElement("svg",e({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24},t),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}))}W.propTypes={value:t.any.isRequired,valid:t.bool.isRequired,validate:t.func.isRequired,onChange:t.func.isRequired,onSave:t.func};const q=e=>isNaN(Number(e))||""===e?{value:e,valid:!1}:{value:parseFloat(e),valid:!0},K=e=>/^-?\d+$/.test(e)?{value:parseInt(e,10),valid:!0}:{value:e,valid:!1},Y=e=>({value:e,valid:!0}),X=i((e=>({telemetry:e.telemetry})));class J extends n.Component{constructor(e){super(e),this.state={graphing:!1,paused:!1,availableKeys:[],selectedKeys:[],windowMs:{value:I.windowMs,valid:!0}},this.containerRef=n.createRef(),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.handleDocumentKeydown=this.handleDocumentKeydown.bind(this)}componentDidMount(){this.containerRef.current&&this.containerRef.current.addEventListener("keydown",this.handleDocumentKeydown)}componentWillUnmount(){this.containerRef.current&&this.containerRef.current.removeEventListener("keydown",this.handleDocumentKeydown)}componentDidUpdate(e){this.props.telemetry!==e.telemetry&&this.setState((e=>{if(0===this.props.telemetry.length)return{availableKeys:[],selectedKeys:[]};const t=[...e.availableKeys];for(const{data:n}of this.props.telemetry)for(const e of Object.keys(n))isNaN(parseFloat(n[e]))||t.includes(e)||t.push(e);return{availableKeys:t,selectedKeys:e.selectedKeys}}))}handleDocumentKeydown(t){"Space"!==t.code&&"k"!==t.key||this.setState(e(e({},this.state),{paused:!this.state.paused}))}start(){this.setState(e(e({},this.state),{graphing:!0,paused:!1}))}stop(){this.setState(e(e({},this.state),{graphing:!1}))}pause(){this.setState(e(e({},this.state),{paused:!0}))}play(){this.setState(e(e({},this.state),{paused:!1}))}render(){const e=!this.state.graphing&&0===this.state.availableKeys.length,t=this.state.graphing&&0===this.state.selectedKeys.length,s=e||t,a=this.props.telemetry.map((e=>[{name:"time",value:e.timestamp},...Object.keys(e.data).filter((e=>this.state.selectedKeys.includes(e))).map((t=>({name:t,value:parseFloat(e.data[t])})))]));return n.createElement(M,{className:"flex flex-col overflow-auto",isUnlocked:this.props.isUnlocked,ref:this.containerRef,tabIndex:0},n.createElement("div",{className:"flex"},n.createElement(N,{isDraggable:this.props.isDraggable},"Graph"),n.createElement(T,null,this.state.graphing&&0!==this.state.selectedKeys.length&&n.createElement(R,{className:"w-8 h-8 icon-btn"},this.state.paused?n.createElement(B,{className:"w-6 h-6",onClick:this.play}):n.createElement(j,{className:"w-6 h-6",onClick:this.pause})),n.createElement(R,null,this.state.graphing?n.createElement(F,{className:"w-6 h-6 text-black",onClick:this.stop}):n.createElement($,{className:"w-6 h-6",onClick:this.start})))),n.createElement(S,{className:s?"flex-center":""},this.state.graphing?t?n.createElement("p",{className:"justify-self-center text-center"},"No telemetry selected to graph"):n.createElement(G,{data:a,options:{windowMs:this.state.windowMs.valid?this.state.windowMs.value:I.windowMs},paused:this.state.paused}):e?n.createElement("p",{className:"justify-self-center text-center"},"Send number-valued telemetry data to graph them over time"):n.createElement(n.Fragment,null,n.createElement("p",{className:"my-2 text-center"},"Press the upper-right button to graph selected keys over time"),n.createElement("h3",{className:"mt-6 font-medium"},"Telemetry to graph:"),n.createElement("div",{className:"ml-3"},n.createElement(k,{arr:this.state.availableKeys,onChange:e=>this.setState({selectedKeys:e}),selected:this.state.selectedKeys})),n.createElement("div",{className:"mt-4"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("h3",{className:"font-medium"},"Options:")),n.createElement("div",{className:"ml-3"},n.createElement("table",null,n.createElement("tbody",null,n.createElement("tr",null,n.createElement("td",null,"Window (ms)"),n.createElement("td",null,n.createElement(W,{value:this.state.windowMs.value,valid:this.state.windowMs.valid,validate:K,onChange:({value:e,valid:t})=>this.setState({windowMs:{value:e,valid:t}})}))))))))))}}var Z=X(J);const Q=new Image,ee=[];let te=!1;Q.onload=function(){te=!0,ee.forEach((e=>e.render()))},Q.src="/dash/assets/field.43c876c9.png";const ne={padding:15,alpha:.25,fieldSize:144,splineSamples:250,gridLineWidth:1,gridLineColor:"rgb(120, 120, 120)"};class se{constructor(e,t){this.canvas=e,this.ctx=e.getContext("2d"),this.options=r.cloneDeep(ne),Object.assign(this.options,t||{}),this.overlay={ops:[]}}setOverlay(e){this.overlay=e}render(){this.canvas.width=this.canvas.width,this.ctx.scale(devicePixelRatio,devicePixelRatio);const e=this.canvas.width/devicePixelRatio,t=this.canvas.height/devicePixelRatio,n=(e<t?e:t)-2*this.options.padding;te||-1!==ee.indexOf(this)||ee.push(this),this.renderField((e-n)/2,(t-n)/2,n,n)}renderField(e,t,n,s){this.ctx.save(),this.ctx.globalAlpha=this.options.alpha,this.ctx.drawImage(Q,e,t,n,s),this.ctx.restore(),this.renderGridLines(e,t,n,s,7,7),this.renderOverlay(e,t,n,s)}renderGridLines(e,t,n,s,a,r){this.ctx.save(),this.ctx.strokeStyle=this.options.gridLineColor,this.ctx.lineWidth=this.options.gridLineWidth/devicePixelRatio;const i=n/(a-1),o=s/(r-1);for(let l=0;l<a;l++){const n=e+i*l;this.ctx.beginPath(),this.ctx.fineMoveTo(n,t),this.ctx.fineLineTo(n,t+s),this.ctx.stroke()}for(let l=0;l<r;l++){const s=t+o*l;this.ctx.beginPath(),this.ctx.fineMoveTo(e,s),this.ctx.fineLineTo(e+n,s),this.ctx.stroke()}this.ctx.restore()}renderOverlay(e,t,n,s){const a=this.options;this.ctx.save(),this.ctx.translate(e+n/2,t+s/2),this.ctx.scale(n/a.fieldSize,-s/a.fieldSize),this.ctx.rotate(Math.PI/2),this.ctx.lineCap="butt",this.overlay.ops.forEach((e=>{switch(e.type){case"fill":this.ctx.fillStyle=e.color;break;case"stroke":this.ctx.strokeStyle=e.color;break;case"strokeWidth":this.ctx.lineWidth=e.width;break;case"circle":this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.radius,0,2*Math.PI),e.stroke?this.ctx.stroke():this.ctx.fill();break;case"polygon":{this.ctx.beginPath();const{xPoints:t,yPoints:n,stroke:s}=e;this.ctx.fineMoveTo(t[0],n[0]);for(let e=1;e<t.length;e++)this.ctx.fineLineTo(t[e],n[e]);this.ctx.closePath(),s?this.ctx.stroke():this.ctx.fill();break}case"polyline":{this.ctx.beginPath();const{xPoints:t,yPoints:n}=e;this.ctx.fineMoveTo(t[0],n[0]);for(let e=1;e<t.length;e++)this.ctx.fineLineTo(t[e],n[e]);this.ctx.stroke();break}case"spline":{this.ctx.beginPath();const{ax:t,bx:n,cx:s,dx:r,ex:i,fx:o,ay:l,by:c,cy:d,dy:h,ey:u,fy:m}=e;this.ctx.fineMoveTo(o,m);for(let e=0;e<=a.splineSamples;e++){const p=e/a.splineSamples,g=(t*p+n)*(p*p*p*p)+s*(p*p*p)+r*(p*p)+i*p+o,f=(l*p+c)*(p*p*p*p)+d*(p*p*p)+h*(p*p)+u*p+m;this.ctx.lineTo(g,f)}this.ctx.stroke();break}default:throw new Error(`unknown operation: ${e.type}`)}})),this.ctx.restore()}}class ae extends n.Component{constructor(e){super(e),this.canvasRef=n.createRef(),this.renderField=this.renderField.bind(this),this.overlay={ops:[]}}componentDidMount(){this.field=new se(this.canvasRef.current),this.renderField()}componentDidUpdate(e){this.props.telemetry!==e.telemetry&&(this.overlay=this.props.telemetry.reduce(((e,{fieldOverlay:t})=>0===t.ops.length?e:t),this.overlay),this.field.setOverlay(this.overlay),this.renderField())}renderField(){this.field&&this.field.render()}render(){return n.createElement(M,{isUnlocked:this.props.isUnlocked},n.createElement(N,{isDraggable:this.props.isDraggable},"Field"),n.createElement(H,{ref:this.canvasRef,onResize:this.renderField,containerHeight:"calc(100% - 3em)"}))}}ae.propTypes={telemetry:t.arrayOf(t.object).isRequired,isDraggable:t.bool,isUnlocked:t.bool};var re=i((({telemetry:e})=>({telemetry:e})))(ae);const ie=({value:e,onChange:t,onSave:s})=>n.createElement("span",{className:"flex items-center"},n.createElement("input",{className:"mr-4 rounded",type:"checkbox",checked:e,onChange:e=>t({value:e.target.checked,valid:!0})}),n.createElement("button",{className:"bg-gray-100 px-2 rounded border border-gray-200",onClick:s},"Save"));ie.propTypes={value:t.bool.isRequired,onChange:t.func.isRequired,onSave:t.func.isRequired};const oe=({value:e,enumValues:t,onChange:s,onSave:a})=>n.createElement("span",null,n.createElement("select",{className:"valid mr-4 rounded py-0",value:e,onChange:e=>s({value:e.target.value,valid:!0})},t.map((e=>n.createElement("option",{key:e,value:e},e)))),n.createElement("button",{className:"bg-gray-100 px-2 rounded border border-gray-200",onClick:a},"Save"));oe.propTypes={value:t.string.isRequired,enumValues:t.arrayOf(t.string).isRequired,onChange:t.func.isRequired,onSave:t.func.isRequired};const le={BOOLEAN:"boolean",INT:"int",DOUBLE:"double",STRING:"string",ENUM:"enum",CUSTOM:"custom"};class ce extends n.Component{render(){const{type:e,name:t,value:s,enumClass:a,enumValues:r,modified:i,valid:o,onChange:l,onSave:c}=this.props,d=({valid:t,value:n})=>{l({__type:e,__value:n,__valid:t})},h=()=>{o&&i&&c({__type:e,__value:s,__valid:!0,__enumClass:a})};let u;switch(e){case le.INT:u=n.createElement(W,{value:s,valid:o,validate:K,onChange:d,onSave:h});break;case le.DOUBLE:u=n.createElement(W,{value:s,valid:o,validate:q,onChange:d,onSave:h});break;case le.STRING:u=n.createElement(W,{value:s,valid:o,validate:Y,onChange:d,onSave:h});break;case le.BOOLEAN:u=n.createElement(ie,{value:s,onChange:d,onSave:h});break;case le.ENUM:u=n.createElement(oe,{value:s,enumValues:r,onChange:d,onSave:h});break;default:u=n.createElement("p",null,"Unknown option type: ",e)}return n.createElement("tr",null,n.createElement("td",null,n.createElement("span",{style:i?{userSelect:"auto",opacity:1}:{userSelect:"none",opacity:0}},"*"),t),n.createElement("td",null,u))}}function de(t){return n.createElement("svg",e({fill:"#000000",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}ce.propTypes={type:t.oneOf(Object.values(le)).isRequired,name:t.string.isRequired,value:t.any.isRequired,modified:t.bool.isRequired,valid:t.bool.isRequired,enumClass:t.string,enumValues:t.arrayOf(t.string),onChange:t.func.isRequired,onSave:t.func.isRequired};class he extends n.Component{constructor(e){super(e),this.state={expanded:!1},this.toggleVisibility=this.toggleVisibility.bind(this)}toggleVisibility(){this.setState({expanded:!this.state.expanded})}render(){const{name:e,value:t}=this.props,s=Object.keys(t);s.sort();const a=s.map((e=>{const s=t[e],a=t=>{this.props.onChange({__type:le.CUSTOM,__value:{[e]:t}})},r=t=>{this.props.onSave({__type:le.CUSTOM,__value:{[e]:t}})};return s.__type===le.CUSTOM?n.createElement(he,{key:e,name:e,value:s.__value,onChange:a,onSave:r}):n.createElement(ce,{key:e,type:s.__type,name:e,value:s.__newValue,valid:s.__valid,enumClass:s.__enumClass,enumValues:s.__enumValues,modified:s.__modified,onChange:a,onSave:r})}));return n.createElement("tr",null,n.createElement("td",null,n.createElement("div",{className:"option-header py-1 cursor-pointer",onClick:this.toggleVisibility},n.createElement("div",{className:"w-7 h-7 mr-2 bg-gray-100 flex-center rounded-full border border-gray-200 hover:border-gray-400 hover:bg-gray-200\n                          transition transform "+(this.state.expanded?"":"-rotate-90")},n.createElement(de,{className:"w-6 h-6"})),n.createElement("div",{className:"flex justify-between items-center"},n.createElement("h3",{className:"text-lg select-none"},e))),this.state.expanded&&n.createElement("table",null,n.createElement("tbody",null,a))))}}function ue(t){return n.createElement("svg",e({fill:"#000000",height:48,viewBox:"0 0 24 24",width:48,xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}))}function me(t){return n.createElement("svg",e({fill:"#000000",height:48,viewBox:"0 0 24 24",width:48,xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}he.propTypes={name:t.string.isRequired,value:t.object.isRequired,onChange:t.func.isRequired,onSave:t.func.isRequired};const pe=e=>{if(e.__type===le.CUSTOM){const t={__type:le.CUSTOM,__value:{}};for(const n of Object.keys(e.__value)){const s=pe(e.__value[n]);s&&(t.__value[n]=s)}if(!r.isEmpty(t.__value))return t}else if(e.__modified&&e.__valid)return{__type:e.__type,__value:e.__newValue,__valid:!0,__enumClass:e.__enumClass}},ge=({isDraggable:e=!1,isUnlocked:t=!1})=>{const s=o(),a=l((e=>e.config.configRoot)),r=e=>s((e=>({type:"SAVE_CONFIG",configDiff:e}))(e)),i=Object.keys(a.__value||{});return i.sort(),n.createElement(M,{isUnlocked:t},n.createElement("div",{className:"flex"},n.createElement(N,{isDraggable:e},"Configuration"),n.createElement(T,null,n.createElement(R,{onClick:()=>{return r(null!=(e=pe(a))?e:{__type:le.CUSTOM,__value:{}});var e}},n.createElement(ue,{className:"w-6 h-6"})),n.createElement(R,{onClick:()=>s({type:"REFRESH_CONFIG"})},n.createElement(me,{className:"w-6 h-6"})))),n.createElement(S,null,n.createElement("table",{className:"block h-full"},n.createElement("tbody",null,i.map((e=>n.createElement(he,{key:e,name:e,value:a.__value[e].__value||{},onChange:t=>{s((e=>({type:"UPDATE_CONFIG",configDiff:e}))({__type:le.CUSTOM,__value:{[e]:t}}))},onSave:t=>{r({__type:le.CUSTOM,__value:{[e]:t}})}})))))))},fe=({isDraggable:t=!1,isUnlocked:s=!1})=>{const[a,r]=n.useState([]),[i,o]=n.useState({}),c=l((e=>e.telemetry));n.useEffect((()=>{if(0===c.length)return r([]),void o({});r(c.reduce(((e,{log:t})=>0===t.length?e:t),a)),o(c.reduce(((t,{data:n})=>Object.keys(n).reduce(((t,s)=>e(e({},t),{[s]:n[s]})),t)),i))}),[c]);const d=Object.keys(i).map((e=>n.createElement("span",{key:e,dangerouslySetInnerHTML:{__html:`${e}: ${i[e]}<br />`}}))),h=a.map(((e,t)=>n.createElement("span",{key:t,dangerouslySetInnerHTML:{__html:`${e}<br />`}})));return n.createElement(M,{isUnlocked:s},n.createElement(N,{isDraggable:t},"Telemetry"),n.createElement(S,null,n.createElement("p",null,d),n.createElement("p",null,h)))};class ve extends n.Component{constructor(e){super(e),this.canvasRef=n.createRef(),this.renderImage=this.renderImage.bind(this),this.image=new Image,this.image.onload=this.renderImage,this.state={rotation:0}}componentDidMount(){this.ctx=this.canvasRef.current.getContext("2d")}componentDidUpdate(){this.image.src=`data:image/jpeg;base64,${this.props.imageStr}`}renderImage(){if(this.ctx&&this.props.imageStr.length>0){const e=this.canvasRef.current;e.width=e.width;const t=e.width,n=e.height,s=Math.min(devicePixelRatio,(this.state.rotation%2==0?n:t)/this.image.height,(this.state.rotation%2==0?t:n)/this.image.width);this.ctx.translate(t/2,n/2),this.ctx.rotate(this.state.rotation*Math.PI/2),this.ctx.scale(s,s),this.ctx.drawImage(this.image,-this.image.width/2,-this.image.height/2,this.image.width,this.image.height)}}render(){return n.createElement(M,{isUnlocked:this.props.isUnlocked},n.createElement("div",{className:"flex"},n.createElement(N,{isDraggable:this.props.isDraggable},"Camera"),n.createElement(T,null,n.createElement(R,null,n.createElement(me,{className:"w-6 h-6",onClick:()=>this.setState({rotation:(this.state.rotation+1)%4})})))),n.createElement(S,null,n.createElement("div",{style:{height:"100%",minHeight:"10rem"}},n.createElement(H,{ref:this.canvasRef,onResize:this.renderImage}))))}}ve.propTypes={imageStr:t.string.isRequired,isDraggable:t.bool,isUnlocked:t.bool};var Ee=i((({camera:e})=>({imageStr:e.imageStr})))(ve);const we="INIT",ye="RUNNING",be="STOPPED";function _e(t){return n.createElement("svg",e({fill:"#000000",height:48,viewBox:"0 0 24 24",width:48,xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M7.97,16L5,19C4.67,19.3 4.23,19.5 3.75,19.5A1.75,1.75 0 0,1 2,17.75V17.5L3,10.12C3.21,7.81 5.14,6 7.5,6H16.5C18.86,6 20.79,7.81 21,10.12L22,17.5V17.75A1.75,1.75 0 0,1 20.25,19.5C19.77,19.5 19.33,19.3 19,19L16.03,16H7.97M7,8V10H5V11H7V13H8V11H10V10H8V8H7M16.5,8A0.75,0.75 0 0,0 15.75,8.75A0.75,0.75 0 0,0 16.5,9.5A0.75,0.75 0 0,0 17.25,8.75A0.75,0.75 0 0,0 16.5,8M14.75,9.75A0.75,0.75 0 0,0 14,10.5A0.75,0.75 0 0,0 14.75,11.25A0.75,0.75 0 0,0 15.5,10.5A0.75,0.75 0 0,0 14.75,9.75M18.25,9.75A0.75,0.75 0 0,0 17.5,10.5A0.75,0.75 0 0,0 18.25,11.25A0.75,0.75 0 0,0 19,10.5A0.75,0.75 0 0,0 18.25,9.75M16.5,11.5A0.75,0.75 0 0,0 15.75,12.25A0.75,0.75 0 0,0 16.5,13A0.75,0.75 0 0,0 17.25,12.25A0.75,0.75 0 0,0 16.5,11.5Z"}))}function xe(t){return n.createElement("svg",e({fill:"#000000",width:48,height:48,viewBox:"0 0 24 24"},t),n.createElement("path",{d:"M2,5.27L3.28,4L20,20.72L18.73,22L12.73,16H7.97L5,19C4.67,19.3 4.23,19.5 3.75,19.5A1.75,1.75 0 0,1 2,17.75V17.5L3,10.12C3.1,9.09 3.53,8.17 4.19,7.46L2,5.27M5,10V11H7V13H8V11.27L6.73,10H5M16.5,6C18.86,6 20.79,7.81 21,10.12L22,17.5V17.75C22,18.41 21.64,19 21.1,19.28L7.82,6H16.5M16.5,8A0.75,0.75 0 0,0 15.75,8.75A0.75,0.75 0 0,0 16.5,9.5A0.75,0.75 0 0,0 17.25,8.75A0.75,0.75 0 0,0 16.5,8M14.75,9.75A0.75,0.75 0 0,0 14,10.5A0.75,0.75 0 0,0 14.75,11.25A0.75,0.75 0 0,0 15.5,10.5A0.75,0.75 0 0,0 14.75,9.75M18.25,9.75A0.75,0.75 0 0,0 17.5,10.5A0.75,0.75 0 0,0 18.25,11.25A0.75,0.75 0 0,0 19,10.5A0.75,0.75 0 0,0 18.25,9.75M16.5,11.5A0.75,0.75 0 0,0 15.75,12.25A0.75,0.75 0 0,0 16.5,13A0.75,0.75 0 0,0 17.25,12.25A0.75,0.75 0 0,0 16.5,11.5Z"}))}const Ce=s.span.attrs((e=>({className:"fixed rounded-md px-3 py-1 w-max bg-gray-800 bg-opacity-80 text-white text-sm pointer-events-none transform transition "+(e.isShowing?"-translate-y-11 opacity-100":"-translate-y-9 opacity-0")})))`
  top: ${e=>e.top};
  left: ${e=>e.left};
`,Me=({children:e,hoverRef:t,isShowing:s})=>{var a,r,i,o,l,d,h;const u=n.useRef(null);return c.createPortal(n.createElement(Ce,{ref:u,isShowing:s,top:`${null==(a=t.current)?void 0:a.getBoundingClientRect().top}px`,left:(null!=(i=null==(r=t.current)?void 0:r.getBoundingClientRect().left)?i:0)+(null!=(l=null==(o=t.current)?void 0:o.clientWidth)?l:0)/2-(null!=(h=null==(d=u.current)?void 0:d.clientWidth)?h:0)/2+"px"},e),document.body)},Ne=i((({status:t,gamepad:n})=>e(e({},t),n)),{initOpMode:e=>(e=>({type:"INIT_OP_MODE",opModeName:e}))(e),startOpMode:()=>({type:"START_OP_MODE"}),stopOpMode:()=>({type:"STOP_OP_MODE"})}),Se=s.button.attrs((e=>({className:`ml-2 py-1 px-3 border rounded-md shadow-md ${e.className}`})))``;class Te extends n.Component{constructor(e){super(e),this.gamepadUnsupportedTooltipTimeout=null,this.state={selectedOpMode:"",shouldShowGamepadUnsupportedTooltip:!1},this.gamepadUnsupportedTooltipRef=n.createRef(),this.onChange=this.onChange.bind(this)}gamepadIconsHover(e){let t;this.gamepadUnsupportedTooltipTimeout=setTimeout((()=>{this.gamepadUnsupportedTooltipTimeout===t&&this.setState((e=>({shouldShowGamepadUnsupportedTooltip:!0})))}),500),t=this.gamepadUnsupportedTooltipTimeout}gamepadIconsUnhover(){this.gamepadUnsupportedTooltipTimeout=null,this.setState((e=>({shouldShowGamepadUnsupportedTooltip:!1})))}static getDerivedStateFromProps(e,t){return"$Stop$Robot$"!==e.activeOpMode?{selectedOpMode:e.activeOpMode}:""===t.selectedOpMode||-1===e.opModeList.indexOf(t.selectedOpMode)?{selectedOpMode:e.opModeList[0]||""}:{}}onChange(e){this.setState({selectedOpMode:e.target.value})}renderInitButton(){return n.createElement(Se,{className:"bg-blue-200 border-blue-300",onClick:()=>this.props.initOpMode(this.state.selectedOpMode)},"Init")}renderStartButton(){return n.createElement(Se,{className:"bg-green-200 border-green-300",onClick:()=>this.props.startOpMode()},"Start")}renderStopButton(){return n.createElement(Se,{className:"bg-red-200 border-red-300",onClick:()=>this.props.stopOpMode()},"Stop")}renderButtons(){const{activeOpMode:e,activeOpModeStatus:t,opModeList:s}=this.props;return 0===s.length?null:"$Stop$Robot$"===e?this.renderInitButton():t===we?n.createElement("span",null,this.renderStartButton(),this.renderStopButton()):t===ye?this.renderStopButton():t===be?null:n.createElement("p",null,"Unknown op mode status: ",t)}render(){const{available:e,activeOpMode:t,opModeList:s,warningMessage:a,errorMessage:r,gamepadsSupported:i}=this.props,{gamepad1Connected:o,gamepad2Connected:l}=this.props;if(!e)return n.createElement(M,{isUnlocked:this.props.isUnlocked},n.createElement(N,{isDraggable:this.props.isDraggable},"Op Mode"),n.createElement(S,{className:"flex-center"},n.createElement("h3",{className:"text-md text-center"},"Op mode controls have not initialized")));const c=!i&&this.state.shouldShowGamepadUnsupportedTooltip;return n.createElement(M,{isUnlocked:this.props.isUnlocked},n.createElement("div",{className:"flex"},n.createElement(N,{isDraggable:this.props.isDraggable},"Op Mode"),n.createElement("div",{onPointerEnter:this.gamepadIconsHover.bind(this),onPointerLeave:this.gamepadIconsUnhover.bind(this),ref:this.gamepadUnsupportedTooltipRef},n.createElement(T,null,n.createElement(O,null,i?n.createElement(_e,{className:"w-6 h-6",style:{opacity:o?1:.3}}):n.createElement(xe,{className:"w-6 h-6"})),n.createElement(O,null,i?n.createElement(_e,{className:"w-6 h-6",style:{opacity:l?1:.3}}):n.createElement(xe,{className:"w-6 h-6"}))),n.createElement(Me,{isShowing:c,hoverRef:this.gamepadUnsupportedTooltipRef},"Due to changes to JavaScript, gamepads are no longer supported in your browser."))),n.createElement(S,null,n.createElement("select",{className:"bg-gray-200 rounded p-1 pr-6 m-1 mr-2 border border-gray-300 shadow-md disabled:shadow-none disabled:text-gray-600 transition",value:this.state.selectedOpMode,disabled:"$Stop$Robot$"!==t||0===s.length,onChange:this.onChange},0===s.length?n.createElement("option",null,"Loading..."):s.sort().map((e=>n.createElement("option",{key:e},e)))),this.renderButtons(),""!==r&&n.createElement("p",{className:"error mt-5 ml-1"},"Error: ",r),""!==a&&n.createElement("p",{className:"warning mt-5 ml-1"},"Warning: ",a)))}}var Oe=Ne(Te);const Re=s.div`
  position: fixed;
  bottom: ${({bottom:e,height:t,isShowing:n})=>n?e:`calc(${e} - (${t} * 2)) `};
  right: ${({right:e})=>e};

  transition: bottom 300ms ease;
`,ke=s.button.attrs((({customClassName:e})=>({className:`focus:outline-none focus:ring-2 focus:ring-opacity-50 flex-center transition ${e}`})))`
  width: ${({width:e})=>e};
  height: ${({height:e})=>e};

  border-radius: 50%;

  padding: 0;

  border: none;
  outline: none !important;

  transition: 300ms ease;
`,Le=s.img`
  width: 1.95em;
  color: white;
`,Ie=t=>n.createElement(Re,e({},t),n.createElement(ke,e(e({},t),{onClick:t.clickEvent}),n.createElement(Le,{src:t.icon})),n.Children.map(t.children,(e=>n.cloneElement(e,{isOpen:t.isOpen}))));function Ae(e,t){const[s,a]=n.useState(!1),r=n.useRef(!1),i=n.useRef(null);return n.useEffect((()=>{var n,s,o,l;const c=()=>{r.current=!0,null!==i.current&&clearInterval(i.current),i.current=setTimeout((()=>{r.current?a(!0):a(!1)}),1e3*e)},d=()=>{r.current=!1,a(!1)};null!==t.current&&(null==(n=t.current)||n.removeEventListener("mouseenter",c),null==(s=t.current)||s.removeEventListener("focusin",c),null==(o=t.current)||o.removeEventListener("mouseleave",d),null==(l=t.current)||l.removeEventListener("focusout",d)),t.current&&(t.current.addEventListener("mouseenter",c),t.current.addEventListener("focusin",c),t.current.addEventListener("mouseleave",d),t.current.addEventListener("focusout",d))}),[e,t]),n.useEffect((()=>()=>{null!==i.current&&clearTimeout(i.current)}),[]),s}Ie.defaultProps={width:"4em",height:"4em",bottom:"2em",right:"2em"};const De=s.button.attrs((({customClass:e})=>({className:`top-1/2 left-1/2 rounded-full outline-none focus:outline-none relative flex-center transition ${e}`})))`
  /* Not sure why but removing this and replacing it with the tailwind absolute class breaks the button */
  position: absolute;

  transform: ${({angle:e,openMargin:t,isOpen:n})=>`translate(${`calc(${n?Math.cos(e):0} * ${t} - 50%)`}, ${`calc(${n?Math.sin(e):0} * ${t} - 50%)`})`};

  z-index: -1;
`,ze=s.div`
  transition: transform 300ms ease;

  transform: ${({fineAdjustIconX:e,fineAdjustIconY:t,isOpen:n})=>`translate(${e}, ${t}) rotate(${n?0:90}deg)`};
`,Pe=t=>{const s=n.useRef(null),a=Ae(.5,s);return n.createElement(De,e(e({},t),{onClick:t.clickEvent,ref:s}),n.createElement(ze,e({},t),t.children),""!==t.toolTipText&&n.createElement(Me,{isShowing:a,hoverRef:s},t.toolTipText))};function Ve(t){return n.createElement("svg",e({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",width:"18px",height:"18px"},t),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("circle",{cx:12,cy:12,r:3.2}),n.createElement("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"}))}function Ue(t){return n.createElement("svg",e({xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",viewBox:"0 0 24 24",fill:"white",width:"18px",height:"18px"},t),n.createElement("g",null,n.createElement("path",{d:"M0,0h24v24H0V0z",fill:"none"}),n.createElement("path",{d:"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"})))}function He(t){return n.createElement("svg",e({xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",viewBox:"0 0 24 24",fill:"white",width:"18px",height:"18px"},t),n.createElement("g",null,n.createElement("rect",{fill:"none",height:24,width:24}),n.createElement("path",{d:"M14,12l-2,2l-2-2l2-2L14,12z M12,6l2.12,2.12l2.5-2.5L12,1L7.38,5.62l2.5,2.5L12,6z M6,12l2.12-2.12l-2.5-2.5L1,12 l4.62,4.62l2.5-2.5L6,12z M18,12l-2.12,2.12l2.5,2.5L23,12l-4.62-4.62l-2.5,2.5L18,12z M12,18l-2.12-2.12l-2.5,2.5L12,23l4.62-4.62 l-2.5-2.5L12,18z"})))}function Ge(t){return n.createElement("svg",e({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",width:"18px",height:"18px"},t),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M14 17H4v2h10v-2zm6-8H4v2h16V9zM4 15h16v-2H4v2zM4 5v2h16V5H4z"}))}function We(t){return n.createElement("svg",e({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",width:"18px",height:"18px"},t),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M13 13v8h8v-8h-8zM3 21h8v-8H3v8zM3 3v8h8V3H3zm13.66-1.31L11 7.34 16.66 13l5.66-5.66-5.66-5.65z"}))}function $e(t){return n.createElement("svg",e({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",width:"18px",height:"18px"},t),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"}))}Pe.defaultProps={fineAdjustIconX:"0",fineAdjustIconY:"0",openMargin:"0",toolTipText:"",isOpen:!1};const Fe=s.div.attrs({className:"pointer-events-none grid grid-cols-2 gap-x-6 gap-y-5"})`
  position: fixed;
  bottom: ${({bottom:e})=>e};
  right: ${({right:e})=>e};
`,Be=s.button.attrs((({isOpen:e,customStyles:t})=>({className:`rounded bg-white border border-gray-300 hover:border-gray-400 shadow-md hover:shadow-lg flex justify-start items-center px-4 py-4 transform transition\n    hover:-translate-y-0.5 focus:-translate-y-0.5 focus:border-0 focus:outline-none ring-2 ring-transparent ${e?"pointer-events-auto opacity-100 scale-100":"pointer-events-none opacity-0 scale-75"} ${t}`})))`
  transition-delay: ${({index:e})=>8*Math.pow(e,1.5)+"ms"};
`,je=[{title:"OpMode View",view:x.OPMODE_VIEW,icon:n.createElement(We,{className:"w-6 h-6"}),customStyles:"focus:ring-red-600",iconBg:"bg-red-500"},{title:"Field View",view:x.FIELD_VIEW,icon:n.createElement(He,{className:"w-7 h-7 transform rotate-45"}),customStyles:"focus:ring-blue-600",iconBg:"bg-blue-500"},{title:"Graph View",view:x.GRAPH_VIEW,icon:n.createElement($,{className:"text-white w-6 h-6"}),customStyles:"focus:ring-green-600",iconBg:"bg-green-500"},{title:"Config View",view:x.CONFIG_VIEW,icon:n.createElement(Ue,{className:"w-6 h-6"}),customStyles:"focus:ring-orange-600",iconBg:"bg-orange-500"},{title:"Telemetry View",view:x.TELEMETRY_VIEW,icon:n.createElement($e,{className:"w-7 h-7"}),customStyles:"focus:ring-yellow-600",iconBg:"bg-yellow-500"},{title:"Logging View",view:x.LOGGING_VIEW,icon:n.createElement(Ge,{className:"w-6 h-6"}),customStyles:"focus:ring-ping-600",iconBg:"bg-pink-500"},{title:"Camera View",view:x.CAMERA_VIEW,icon:n.createElement(Ve,{className:"w-5 h-5"}),customStyles:"focus:ring-purple-600",iconBg:"bg-purple-500"}],qe=t=>n.createElement(Fe,e({},t),je.map(((s,a)=>n.createElement(Be,e(e({key:s.title},t),{index:a,customStyles:s.customStyles,onClick:()=>t.clickEvent(s.view),disabled:!t.isOpen}),n.createElement("div",{className:`w-8 h-8  rounded mr-3 flex-center ${s.iconBg}`},n.cloneElement(s.icon)),n.createElement("div",{className:"flex flex-col items-start"},n.createElement("h3",{className:"text-lg mt-0 leading-4 font-medium"},s.title))))));var Ke,Ye;function Xe(t){return n.createElement("svg",e({fill:"#fff",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z",fill:"currentColor"}),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}function Je(t){return n.createElement("svg",e({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",width:"18px",height:"18px"},t),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M15 16h4v2h-4zm0-8h7v2h-7zm0 4h6v2h-6zM3 18c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V8H3v10zM14 5h-3l-1-1H6L5 5H2v2h12z"}))}function Ze(t){return n.createElement("svg",e({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",width:"18px",height:"18px"},t),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n.createElement("path",{fill:"currentColor",d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}))}(Ye=Ke||(Ke={}))[Ye.INITIALIZE=0]="INITIALIZE",Ye[Ye.APPEND=1]="APPEND",Ye[Ye.UNDO=2]="UNDO",Ye[Ye.REDO=3]="REDO";function Qe(t){return n.createElement("svg",e({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",width:"18px",height:"18px"},t),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z"}))}function et(t){return n.createElement("svg",e({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",width:"18px",height:"18px"},t),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}))}const tt=({columnIndex:e,rowIndex:t,style:s,data:a})=>{const r=a;return r.visibleColumns[e]?n.createElement("div",{className:"px-2 truncate "+(0===e?"text-neutral-gray-400":""),style:s},r.cellData[t][e]):null},nt=({header:e,data:t,columnsShowing:s})=>{const[a,r]=n.useState([]),[i,o]=n.useState(0),[l,c]=n.useState(!0),m=n.useRef(null);n.useEffect((()=>{r(new Array(e.length).fill(150))}),[e.length]),n.useEffect((()=>{0===t.length&&c(!0)}),[t.length]),n.useEffect((()=>{var e;null==(e=m.current)||e.resetAfterColumnIndex(0)}),[a,s]),n.useEffect((()=>{m.current&&l&&m.current.scrollToItem({rowIndex:t.length})}),[t.length,i,l]);const p=({scrollLeft:e,scrollTop:t,scrollUpdateWasRequested:n})=>{if(o(e),m.current){const e=30*m.current.props.rowCount-m.current.props.height-t;n||c(e<=15)}},g=a.map(((e,t)=>!1===(null!=s?s:[])[t]?0:e));return n.createElement("div",{className:"w-full h-full flex flex-col overflow-x-hidden"},n.createElement("div",{className:"mb-1",style:{width:(0===a.length?[0]:a).reduce(((e,t)=>e+t)),transform:`translateX(${-i}px)`}},e.map(((t,s)=>n.createElement("div",{key:t,className:"inline-flex flex-row relative pr-8 "+(0===g[s]?"hidden":""),style:{width:a[s],minWidth:"3em"}},n.createElement("span",{className:"font-semibold flex-grow truncate"},t),n.createElement(d,{onDrag:(n,{deltaX:s})=>((t,n)=>{const s=e.indexOf(t);if(-1===s)return;const i=[...a];i[s]=Math.max(50,i[s]+n),r(i)})(t,s)},n.createElement("div",{className:"cursor-col-resize hover:bg-gray-200 px-2 mr-2 rounded absolute right-1 hover:bg-opacity-75 transition-colors"},"⋮")))))),n.createElement("div",{className:"flex-grow"},n.createElement(h,null,(({height:s,width:a})=>t.length>0?n.createElement(u,{ref:m,columnCount:e.length,columnWidth:e=>g[e],height:s,rowCount:t.length,rowHeight:()=>30,width:a,itemData:{cellData:t,visibleColumns:g.map((e=>0!==e))},onScroll:p},tt):n.createElement("div",{style:{width:a,height:s},className:"flex-center text-center"},"Logs will be recorded as an opmode starts streaming telemetry data",n.createElement("br",null),"A CSV download will be available once the opmode is stopped")))))};function st(e){return`${`0${e.getHours()}`.slice(-2)}:${`0${e.getMinutes()}`.slice(-2)}:${`0${e.getSeconds()}`.slice(-2)}.${`${e.getMilliseconds()}000`.slice(0,3)}`}function at(t){return n.createElement("svg",e({xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:24,viewBox:"0 0 24 24",width:24},t),n.createElement("g",null,n.createElement("rect",{fill:"none",height:24,width:24})),n.createElement("g",null,n.createElement("path",{d:"M5,20h14v-2H5V20z M19,9h-4V3H9v6H5l7,7L19,9z"})))}function rt(t){return n.createElement("svg",e({xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:24,viewBox:"0 0 24 24",width:24},t),n.createElement("rect",{fill:"none",height:24,width:24}),n.createElement("path",{d:"M9,6.17V3h6v6h4l-3.59,3.59L9,6.17z M21.19,21.19L2.81,2.81L1.39,4.22L6.17,9H5l7,7l0.59-0.59L15.17,18H5v2h12.17l2.61,2.61 L21.19,21.19z"}))}function it(t){return n.createElement("svg",e({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"black",width:"18px",height:"18px"},t),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}))}var ot,lt;(lt=ot||(ot={}))[lt.SET=0]="SET",lt[lt.APPEND=1]="APPEND",lt[lt.SET_KEY_SHOWING=2]="SET_KEY_SHOWING";const ct=(t,n)=>{switch(n.type){case 0:return n.payload;case 1:{const{store:e,keys:s,raw:a,keysShowing:r}=t,{timestamp:i,data:o,log:l}=n.payload,c={timestamp:i,log:l,data:new Array(s.length).fill(null)};for(const[t,n]of Object.entries(o))s.includes(t)||(s.push(t),r.push(!0)),c.data[s.indexOf(t)]=n;return e.push(c),a.push([st(new Date(i)),...c.data]),{store:e,keys:s,raw:a,keysShowing:r}}case 2:{const s=[...t.keysShowing];return s[n.payload.index]=n.payload.value,e(e({},t),{keysShowing:s})}}},dt=({checked:e,onChange:t,children:s})=>n.createElement(p.Group,{as:"div",className:"flex items-center space-x-4 py-1 px-3"},n.createElement(p,{as:"button",checked:e,onChange:t,className:(e?"bg-indigo-600":"bg-gray-200")+" relative inline-flex flex-shrink-0 h-4 transition-colors duration-200 ease-in-out border-2 border-transparent rounded-full cursor-pointer w-7 focus:outline-none focus:shadow-outline"},(({checked:e})=>n.createElement("span",{className:(e?"translate-x-3":"translate-x-0")+" inline-block w-3 h-3 transition duration-200 ease-in-out transform bg-white rounded-full"}))),n.createElement(p.Label,{className:"ml-2"},s)),ht=({isDraggable:e=!1,isUnlocked:t=!1})=>{const{activeOpMode:s,activeOpModeStatus:a,opModeList:r}=l((e=>e.status)),i=l((e=>e.telemetry)),[o,c]=n.useReducer(ct,{store:[],keys:[],raw:[],keysShowing:[]}),[d,h]=n.useState(!1),[u,p]=n.useState(""),[g,f]=n.useState(!1),[v,E]=n.useState(!1),[w,y]=n.useState(!0),b=n.useRef(null),_=Ae(.5,b),x=n.useRef(null),C=n.useRef(null);var T,O,R;T=x,O=()=>{v&&E(!1)},R=[C],n.useEffect((()=>{const e=e=>{!T.current||T.current.contains(e.target)||(null==R?void 0:R.every((t=>{var n;return null==(n=t.current)?void 0:n.contains(e.target)})))||O(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[T,O,R]),n.useEffect((()=>{0===(null==r?void 0:r.length)||"$Stop$Robot$"===s?h(!1):(a===ye||i.length>1)&&!d?(h(!0),k()):a===be&&h(!1)}),[s,a,d,r,i]),n.useEffect((()=>{a===ye&&p(null!=s?s:"")}),[s,a]),n.useEffect((()=>{d||0===o.store.length?f(!1):f(!0)}),[d,o.store.length]),n.useEffect((()=>{1===i.length&&0===i[0].timestamp||i.forEach((e=>{c({type:1,payload:e})}))}),[i]);const k=()=>{c({type:0,payload:{store:[],keys:[],raw:[],keysShowing:[]}})};return n.createElement(M,{isUnlocked:t},n.createElement("div",{className:"flex-center"},n.createElement(N,{isDraggable:e},"Logging"),n.createElement("div",{className:"flex items-center mr-3 space-x-1"},n.createElement("button",{className:"icon-btn w-8 h-8 "+(g?"":"border-gray-400"),onClick:()=>{if(!g)return;const e=[...o.store];e.sort(((e,t)=>e.timestamp-t.timestamp));const t=`${["time",...o.keys,"logs"]}\r\n${e.map((e=>`${st(new Date(e.timestamp))},${[...e.data,...new Array(o.keys.length-e.data.length)].join(",")},"${e.log.join("\n")}"`)).join("\r\n")}`,n=new Date(e[0].timestamp),s=n.getFullYear(),a=`0${n.getMonth()}`.slice(-2),r=`0${n.getDay()}`.slice(-2),i=st(n).replaceAll(":","_").split(".")[0];!function(e,t,n){const s=document.createElement("a");s.style.display="none",document.body.appendChild(s);const a=new Blob([e],{type:n}),r=window.URL.createObjectURL(a);s.href=r,s.download=t,s.click(),window.URL.revokeObjectURL(r),s.remove()}(t,`${u} ${s}-${a}-${r} ${i}.csv`,"text/csv")},ref:b},g?n.createElement(at,{className:"w-6 h-6"}):n.createElement(rt,{className:"w-6 h-6 text-neutral-gray-400"}),n.createElement(Me,{hoverRef:b,isShowing:_},0===o.store.length&&a!==ye?"No logs to download":a===ye&&"$Stop$Robot$"!==s?"Cannot download logs while OpMode is running":`Download logs for ${u}`)),n.createElement("div",{className:"relative inline-block"},n.createElement("button",{ref:C,className:"icon-btn w-8 h-8",onClick:()=>E(!v)},n.createElement(it,{className:"w-6 h-6"})),n.createElement(m,{show:v,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95"},n.createElement("div",{ref:x,className:"absolute right-0 mt-2 py-2 origin-top-right bg-white border border-gray-200 rounded-md shadow-lg outline-none",style:{zIndex:99}},n.createElement("p",{className:"text-sm leading-5 border-b border-gray-100 pl-3 pb-1 mb-1 text-gray-500"},"Toggle Items"),n.createElement(dt,{checked:w,onChange:y},"Time"),[...o.keys].map(((e,t)=>n.createElement(dt,{key:e,checked:o.keysShowing[t],onChange:()=>c({type:2,payload:{index:t,value:!o.keysShowing[t]}})},e)))))))),n.createElement(S,null,n.createElement(nt,{header:0!==o.keys.length?["Time",...o.keys]:[],data:o.raw,columnsShowing:[w,...o.keysShowing]})))};function ut(e,t){if(e.length!==t.length)throw new Error("cannot compare arrays with different lengths");for(let n=0;n<e.length;n++){if(e[n]>t[n])return e;if(t[n]>e[n])return t}return e}const mt={[x.FIELD_VIEW]:n.createElement(re,null),[x.GRAPH_VIEW]:n.createElement(Z,null),[x.CONFIG_VIEW]:n.createElement(ge,null),[x.TELEMETRY_VIEW]:n.createElement(fe,null),[x.CAMERA_VIEW]:n.createElement(Ee,null),[x.OPMODE_VIEW]:n.createElement(Oe,null),[x.LOGGING_VIEW]:n.createElement(ht,null)},pt=g.WidthProvider(g),gt=s.div.attrs((({isLayoutLocked:e})=>({className:(e?"bg-white":"bg-gray-100")+" p-2 transition-colors"})))`
  position: relative;

  height: calc(100vh - 52px);

  overflow-x: hidden;
  overflow-y: scroll;
  padding-bottom: 1em;

  background-image: ${e=>e.isLayoutLocked?"":"radial-gradient(#94a3b8 calc((0.5rem + 10px) - 17px), transparent 0)"};
  background-size: ${e=>`${e.bgGridSize}px  ${e.bgGridSize}px`};
  background-position: ${"calc(0.5rem + 10px) calc(0.5rem + 10px - 5px)"};
`,ft=730,vt=1200,Et=[{id:a(),view:x.FIELD_VIEW,layout:{x:0,y:0,w:4,h:9,minW:3,isDraggable:!0,isResizable:!0}},{id:a(),view:x.GRAPH_VIEW,layout:{x:4,y:0,w:4,h:9,minW:3,isDraggable:!0,isResizable:!0}},{id:a(),view:x.CONFIG_VIEW,layout:{x:8,y:0,w:4,h:7,minW:3,isDraggable:!0,isResizable:!0}},{id:a(),view:x.TELEMETRY_VIEW,layout:{x:8,y:7,w:4,h:2,minW:3,isDraggable:!0,isResizable:!0}}],wt=[{id:a(),view:x.FIELD_VIEW,layout:{x:0,y:0,w:4,h:13,minW:3,isDraggable:!0,isResizable:!0}},{id:a(),view:x.GRAPH_VIEW,layout:{x:4,y:0,w:4,h:13,minW:3,isDraggable:!0,isResizable:!0}},{id:a(),view:x.CONFIG_VIEW,layout:{x:8,y:0,w:4,h:11,minW:3,isDraggable:!0,isResizable:!0}},{id:a(),view:x.TELEMETRY_VIEW,layout:{x:8,y:11,w:4,h:2,minW:3,isDraggable:!0,isResizable:!0}}],yt=[{id:a(),view:x.FIELD_VIEW,layout:{x:0,y:0,w:4,h:18,minW:3,isDraggable:!0,isResizable:!0}},{id:a(),view:x.GRAPH_VIEW,layout:{x:4,y:0,w:4,h:18,minW:3,isDraggable:!0,isResizable:!0}},{id:a(),view:x.CONFIG_VIEW,layout:{x:8,y:0,w:4,h:14,minW:3,isDraggable:!0,isResizable:!0}},{id:a(),view:x.TELEMETRY_VIEW,layout:{x:8,y:11,w:4,h:4,minW:3,isDraggable:!0,isResizable:!0}}];function bt(){const t=n.useRef(null),s=n.useRef(null),[i,o]=n.useState(!0),[l,c]=n.useState(!1),[d,h]=n.useState(!1),[u,m]=n.useState(40),[p,{initialize:g,append:f,undo:v,redo:E}]=function(t){const[{history:s,currentHistoryPosition:a},i]=n.useReducer(((t,n)=>{switch(n.type){case 0:return{history:[n.payload],currentHistoryPosition:0};case 1:return 0!==t.history.length&&r.isEqual(t.history[t.currentHistoryPosition],n.payload)?t:{history:[...t.history.slice(0,t.currentHistoryPosition+1),n.payload],currentHistoryPosition:t.currentHistoryPosition+1};case 2:return t.currentHistoryPosition<=0?t:e(e({},t),{currentHistoryPosition:t.currentHistoryPosition-1});case 3:return t.currentHistoryPosition>=t.history.length-1?t:e(e({},t),{currentHistoryPosition:t.currentHistoryPosition+1})}}),{history:[t],currentHistoryPosition:0}),o=n.useMemo((()=>e=>i({type:0,payload:e})),[i]),l=n.useMemo((()=>e=>i({type:1,payload:e})),[i]),c=n.useMemo((()=>()=>i({type:2})),[i]),d=n.useMemo((()=>()=>i({type:3})),[i]);return[s[a],{initialize:o,append:l,undo:c,redo:d}]}([]),w=function(e){const[t,s]=n.useState(!1),a=n.useRef(null),[r]=n.useState((()=>{var t,n,s;const a=document.createElement("div");return a.style.position="fixed",e.top&&(a.style.top=e.top),e.bottom&&(a.style.bottom=null!=(t=e.bottom)?t:""),e.left&&(a.style.left=null!=(n=e.bottom)?n:""),e.right&&(a.style.right=null!=(s=e.right)?s:""),a.style.width=e.width,a.style.height=e.height,a.style.pointerEvents="none",a}));return n.useEffect((()=>{const t=t=>{var n;if(t.clientX>r.offsetLeft&&t.clientY>r.offsetTop&&t.clientX<r.offsetLeft+r.clientWidth&&t.clientY<r.offsetTop+r.clientHeight){const t=null!=(n=e.timeout)?n:5e3;null!==a.current&&clearInterval(a.current),a.current=setTimeout((()=>s(!0)),t),s(!1)}};return document.body.appendChild(r),document.body.addEventListener("mousemove",t),()=>{document.body.removeChild(r),document.body.removeEventListener("mousemove",t),null!==a.current&&clearTimeout(a.current)}}),[r,e.timeout]),t}({bottom:"0",right:"0",width:"14em",height:"13em"});n.useEffect((()=>{const e=new ResizeObserver((e=>{if(s.current)for(const t of e)if(t.target===s.current){const e=s.current.clientWidth-20;m(e/(3*Math.floor(e/300)+1)/3)}}));return null!==s.current&&e.observe(s.current),()=>{e.disconnect()}}),[]),n.useEffect((()=>{const e=window.localStorage.getItem("configurableLayoutStorage"),n=(()=>{var n;if(null!==e)return JSON.parse(e);{const e=null==(n=t.current)?void 0:n.clientHeight;return e?e>vt?yt:e>ft?wt:Et:Et}})();n.forEach((e=>{e.layout.isResizable=!1,e.layout.isDraggable=!1})),g(n)}),[g]),n.useEffect((()=>{const e=e=>{i||navigator.platform.indexOf("Mac")>-1&&(e.metaKey&&"z"===e.key?e.shiftKey?E():v():e.ctrlKey&&"z"===e.key?v():e.ctrlKey&&"y"===e.key&&E())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[i,v,E]),n.useEffect((()=>{window.localStorage.setItem("configurableLayoutStorage",JSON.stringify([...p]))}),[p]);return n.createElement(gt,{ref:t,isLayoutLocked:i,bgGridSize:u},0===p.length&&n.createElement("div",{className:"text-center mt-16 p-12 transition-colors "+(i?"bg-white":"bg-gray-100")},n.createElement("h3",{className:"text-2xl"},"Your custom layout is empty!"),n.createElement("p",{className:"text-gray-600 mt-3"},"Press the floating pencil icon near the bottom right",n.createElement("br",null),"and then click the green plus button to create your own layouts!")),n.createElement("div",{ref:s},n.createElement(pt,{className:"layout",cols:12,resizeHandles:["se"],draggableHandle:".grab-handle",compactType:null,rowHeight:i?70:60,layout:p.map((t=>e({i:t.id},t.layout))),onLayoutChange:t=>{const n=p.map((n=>{var s,a,r;const i=t.find((e=>e.i===n.id));if(null!=i){const t={x:i.x,y:i.y,w:i.w,h:i.h,minW:null!=(s=i.minW)?s:3,isDraggable:null==(a=i.isDraggable)||a,isResizable:null==(r=i.isResizable)||r};n=e(e({},n),{layout:t})}return n}));f(n)},margin:i?[0,0]:[10,10]},p.map((e=>n.createElement("div",{key:e.id},n.cloneElement(mt[e.view],{isDraggable:e.layout.isDraggable,isUnlocked:!i}),n.createElement("div",{className:"absolute top-0 left-0 w-full h-full bg-yellow-300 bg-opacity-50 flex-center rounded transition "+(l?"pointer-events opacity-100":"pointer-events-none opacity-0")},n.createElement("button",{className:"p-4 border-4 border-yellow-600 rounded-full bg-opacity-50 opacity-50 focus:outline-none focus:ring focus:ring-yellow-800",onClick:()=>{var t;t=e.id,f(p.filter((e=>e.id!==t)))},disabled:!l},n.createElement(Ze,{className:"text-yellow-600 w-20 h-20"})))))))),n.createElement(Ie,{width:"4em",height:"4em",bottom:"2em",right:"3.5em",isOpen:!i,isShowing:!(w&&i),clickEvent:()=>{const t=!i;o(t),f(p.map((n=>(n.layout=e(e({},n.layout),{isResizable:!t,isDraggable:!t}),n)))),t&&(h(!1),c(!1))},icon:i?"/dash/assets/create.34997070.svg":"/dash/assets/lock.505d8c02.svg",customClassName:""+(i?"bg-red-500 focus:ring-4 focus:ring-red-600 shadow-red-500-md-prominent hover:shadow-red-500-lg-prominent":"bg-gray-500 focus:ring-4 focus:ring-gray-600 shadow-gray-900-md-prominent hover:shadow-gray-900-lg-prominent")},n.createElement(Pe,{customClass:"w-12 h-12 bg-green-500 border border-green-600 shadow-green-500-md-prominent hover:shadow-green-500-lg-prominent focus:ring focus:ring-green-600",angle:-80*Math.PI/180,openMargin:"5em",fineAdjustIconX:"2%",fineAdjustIconY:"2%",toolTipText:"Add Item",clickEvent:()=>h(!d)},n.createElement(Xe,{className:"text-white w-6 h-6"})),n.createElement(Pe,{customClass:"w-12 h-12 border shadow-orange-500-md-prominent hover:shadow-orange-500-lg-prominent focus:ring "+(l?"bg-orange-500 border-yellow-600 focus:ring-yellow-300":"bg-yellow-500 border-yellow-600 focus:ring-orange-300"),angle:-135*Math.PI/180,openMargin:"5em",fineAdjustIconX:"0",fineAdjustIconY:"0",toolTipText:"Delete Item",clickEvent:()=>c(!l)},l?n.createElement(et,{className:"w-5 h-5"}):n.createElement(Qe,{className:"w-5 h-5"})),n.createElement(Pe,{customClass:"w-12 h-12 bg-indigo-500 border border-indigo-600 shadow-indigo-500-md-prominent hover:shadow-indigo-500-lg-prominent focus:ring focus:ring-indigo-300",angle:170*Math.PI/180,openMargin:"5em",fineAdjustIconX:"8%",fineAdjustIconY:"-2%",toolTipText:"Clear Layout",clickEvent:()=>f([])},n.createElement(Je,{className:"w-5 h-5"}))),n.createElement(qe,{isOpen:d,bottom:"13em",right:"1.5em",clickEvent:e=>{let[t,n]=p.map((e=>[e.layout.y+e.layout.h,e.layout.x+e.layout.w])).reduce(ut,[0,0]);n+4>12&&(n=0,t+=4);const s=p.filter((e=>function([e,t],[n,s]){return Math.max(e,n)<Math.min(t,s)}([n,n+4],[e.layout.x,e.layout.x+e.layout.w]))).map((e=>e.layout.y+e.layout.h)).reduce(((e,t)=>Math.max(e,t)),0),r=Math.max(t-4,s);f([...p,{id:a(),view:e,layout:{x:n,y:r,w:4,h:4,minW:3,isDraggable:!i,isResizable:!i}}])}}))}const _t={DEFAULT:"DEFAULT",FIELD:"FIELD",GRAPH:"GRAPH",ORIGINAL:"ORIGINAL",CONFIGURABLE:"CONFIGURABLE"},xt={[_t.DEFAULT]:{name:"Default",content:n.createElement(b,{gridTemplate:"220px calc(60% - 220px) 40% / 30% 40% 30%"},n.createElement(_,{row:"1 / span 1",col:1},n.createElement(Oe,null)),n.createElement(_,{row:"2 / span 2",col:1},n.createElement(Ee,null)),n.createElement(_,{row:"1 / span 3",col:2},n.createElement(Z,null)),n.createElement(_,{row:"1 / span 2",col:3},n.createElement(ge,null)),n.createElement(_,{row:3,col:3},n.createElement(fe,null)))},[_t.FIELD]:{name:"Field",content:n.createElement(b,{gridTemplate:"220px calc(60% - 220px) 40% / 30% 40% 30%"},n.createElement(_,{row:"1 / span 1",col:1},n.createElement(Oe,null)),n.createElement(_,{row:"2 / span 2",col:1},n.createElement(re,null)),n.createElement(_,{row:"1 / span 3",col:2},n.createElement(Z,null)),n.createElement(_,{row:"1 / span 2",col:3},n.createElement(ge,null)),n.createElement(_,{row:3,col:3},n.createElement(fe,null)))},[_t.GRAPH]:{name:"Graph",content:n.createElement(b,{gridTemplate:"100% / 50% 50%"},n.createElement(_,{row:1,col:1},n.createElement(Z,null)),n.createElement(_,{row:1,col:2},n.createElement(Z,null)))},[_t.ORIGINAL]:{name:"Original",content:n.createElement(b,{gridTemplate:"60% 40% / 65% 35%"},n.createElement(_,{row:"1 / span 2",col:1},n.createElement(Z,null)),n.createElement(_,{row:1,col:2},n.createElement(ge,null)),n.createElement(_,{row:2,col:2},n.createElement(fe,null)))},[_t.CONFIGURABLE]:{name:"Custom",content:n.createElement(bt,null)}};var Ct=Object.freeze(e(e({},_t),{getName:e=>xt[e].name,getContent:e=>{var t,n;return null!=(n=null==(t=xt[e])?void 0:t.content)?n:xt[_t.DEFAULT].content}}));const Mt=(e,t)=>({type:"CONNECT",host:e,port:t}),Nt=e=>t=>{t({type:"RECEIVE_CONNECTION_STATUS",isConnected:e}),e||t({type:"RECEIVE_OP_MODE_LIST",opModeList:[]})},St=e=>({type:"RECEIVE_LAYOUT_PRESET",preset:e});function Tt(t){return n.createElement("svg",e({fill:"#FFFFFF",height:48,viewBox:"0 0 24 24",width:48,xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M12.01 21.49L23.64 7c-.45-.34-4.93-4-11.64-4C5.28 3 .81 6.66.36 7l11.63 14.49.01.01.01-.01z",fillOpacity:.3}),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M3.53 10.95l8.46 10.54.01.01.01-.01 8.46-10.54C20.04 10.62 16.81 8 12 8c-4.81 0-8.04 2.62-8.47 2.95z"}))}function Ot(t){return n.createElement("svg",e({fill:"#FFFFFF",height:48,viewBox:"0 0 24 24",width:48,xmlns:"http://www.w3.org/2000/svg"},t),n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M23.64 7c-.45-.34-4.93-4-11.64-4-1.5 0-2.89.19-4.15.48L18.18 13.8 23.64 7zm-6.6 8.22L3.27 1.44 2 2.72l2.05 2.06C1.91 5.76.59 6.82.36 7l11.63 14.49.01.01.01-.01 3.9-4.86 3.32 3.32 1.27-1.27-3.46-3.46z"}))}class Rt extends n.Component{componentDidMount(){this.props.dispatch(Mt(window.location.hostname,"8000")),this.props.dispatch({type:"GET_LAYOUT_PRESET"})}componentWillUnmount(){this.props.dispatch({type:"DISCONNECT"})}render(){return n.createElement("div",{className:"flex flex-col",style:{width:"100vw",height:"100vh"}},n.createElement("header",{className:"flex justify-between items-center bg-blue-600 px-3 py-1 text-white"},n.createElement("h1",{className:"text-2xl font-medium"},"FTC Dashboard"),n.createElement("div",{className:"flex-center"},n.createElement("select",{className:"text-black text-sm rounded mx-2 py-1 bg-blue-100 border-blue-300 focus:border-blue-100 focus:ring-2 focus:ring-white focus:ring-opacity-40",value:this.props.layoutPreset,onChange:e=>this.props.dispatch({type:"SAVE_LAYOUT_PRESET",preset:e.target.value})},Object.keys(Ct).filter((e=>"string"==typeof Ct[e])).map((e=>n.createElement("option",{key:e,value:e},Ct.getName(e))))),this.props.isConnected&&n.createElement("p",{className:"mx-2",style:{width:"60px",textAlign:"right"}},this.props.pingTime,"ms"),this.props.isConnected?n.createElement(Tt,{className:"ml-4 w-10 h-10"}):n.createElement(Ot,{className:"ml-4 w-10 h-10"}))),Ct.getContent(this.props.layoutPreset))}}Rt.propTypes={isConnected:t.bool.isRequired,pingTime:t.number.isRequired,layoutPreset:t.oneOf(Object.keys(Ct)).isRequired,dispatch:t.func.isRequired};var kt=i((({socket:e,settings:t})=>({isConnected:e.isConnected,pingTime:e.pingTime,layoutPreset:t.layoutPreset})))(Rt);const Lt=e=>({type:"GAMEPAD_CONNECTED",user:e}),It=e=>({type:"GAMEPAD_DISCONNECTED",user:e});let At,Dt,zt;const Pt=(e,t)=>n=>{const s=Date.now();(!r.isEqual(At,e)||!r.isEqual(Dt,t)||s-zt<150)&&(n(((e,t)=>({type:"RECEIVE_GAMEPAD_STATE",gamepad1:e,gamepad2:t}))(e,t)),At=e,Dt=t,zt=s)},Vt={LOGITECH_DUAL_ACTION:"LOGITECH_DUAL_ACTION",XBOX_360:"XBOX_360",SONY_DUALSHOCK_4:"SONY_DUALSHOCK_4",UNKNOWN:"UNKNOWN"};var Ut=e(e({},Vt),{getFromGamepad:e=>-1!==e.id.search("Logitech Dual Action")?Vt.LOGITECH_DUAL_ACTION:-1!==e.id.search("Xbox 360")?Vt.XBOX_360:-1!==e.id.search("054c")&&-1!==e.id.search(new RegExp("09cc|05c4","i"))||-1!==e.id.search(new RegExp("(?=.*7545)(?=.*104)","i"))?Vt.SONY_DUALSHOCK_4:Vt.UNKNOWN,getJoystickDeadzone:e=>{switch(e){case Vt.LOGITECH_DUAL_ACTION:return.06;case Vt.XBOX_360:return.15;case Vt.SONY_DUALSHOCK_4:return.04;default:return.2}},isSupported:e=>e!==Vt.UNKNOWN});const Ht=(e,t,n,s,a)=>s+(e-t)*(a-s)/(n-t),Gt=(e,t=.2,n=1)=>-t<e&&e<t?0:e>n||e<-n?n:e>0?Ht(e,t,n,0,n):Ht(e,-t,-n,0,-n),Wt={left_stick_x:0,left_stick_y:0,right_stick_x:0,right_stick_y:0,dpad_up:!1,dpad_down:!1,dpad_left:!1,dpad_right:!1,a:!1,b:!1,x:!1,y:!1,guide:!1,start:!1,back:!1,left_bumper:!1,right_bumper:!1,left_stick_button:!1,right_stick_button:!1,left_trigger:0,right_trigger:0},$t=e=>{const t=Ut.getFromGamepad(e);if(!Ut.isSupported(t))throw new Error("Unable to extract state from unsupported gamepad.");switch(t){case Ut.LOGITECH_DUAL_ACTION:return{left_stick_x:Gt(-e.axes[1]),left_stick_y:Gt(e.axes[2]),right_stick_x:Gt(-e.axes[3]),right_stick_y:Gt(e.axes[4]),dpad_up:e.buttons[12].pressed,dpad_down:e.buttons[13].pressed,dpad_left:e.buttons[14].pressed,dpad_right:e.buttons[15].pressed,a:e.buttons[1].pressed,b:e.buttons[2].pressed,x:e.buttons[0].pressed,y:e.buttons[3].pressed,guide:!1,start:e.buttons[9].pressed,back:e.buttons[8].pressed,left_bumper:e.buttons[4].pressed,right_bumper:e.buttons[5].pressed,left_stick_button:e.buttons[10].pressed,right_stick_button:e.buttons[11].pressed,left_trigger:e.buttons[6].value,right_trigger:e.buttons[7].value};case Ut.XBOX_360:return{left_stick_x:Gt(e.axes[0]),left_stick_y:Gt(e.axes[1]),right_stick_x:Gt(e.axes[3]),right_stick_y:Gt(e.axes[4]),dpad_up:e.buttons[12].pressed,dpad_down:e.buttons[13].pressed,dpad_left:e.buttons[14].pressed,dpad_right:e.buttons[15].pressed,a:e.buttons[0].pressed,b:e.buttons[1].pressed,x:e.buttons[2].pressed,y:e.buttons[3].pressed,guide:!1,start:e.buttons[9].pressed,back:e.buttons[8].pressed,left_bumper:e.buttons[4].pressed,right_bumper:e.buttons[5].pressed,left_stick_button:e.buttons[10].pressed,right_stick_button:e.buttons[11].pressed,left_trigger:e.buttons[6].value,right_trigger:e.buttons[7].value};case Ut.SONY_DUALSHOCK_4:{const t={left_stick_x:Gt(e.axes[0]),left_stick_y:Gt(e.axes[1]),right_stick_x:Gt(e.axes[2]),right_stick_y:Gt(e.axes[3]),dpad_up:e.buttons[12].pressed,dpad_down:e.buttons[13].pressed,dpad_left:e.buttons[14].pressed,dpad_right:e.buttons[15].pressed,a:e.buttons[0].pressed,b:e.buttons[1].pressed,x:e.buttons[2].pressed,y:e.buttons[3].pressed,guide:e.buttons[16].pressed,start:e.buttons[9].pressed,back:e.buttons[8].pressed,left_bumper:e.buttons[4].pressed,right_bumper:e.buttons[5].pressed,left_stick_button:e.buttons[10].pressed,right_stick_button:e.buttons[11].pressed,left_trigger:e.buttons[6].value,right_trigger:e.buttons[7].value};return void 0!==e.buttons[17]&&(t.touchpad=e.buttons[17].pressed),t}default:throw new Error(`Unable to handle support gamepad of type ${t}`)}};let Ft=-1,Bt=-1;const jt=e=>{var t;let n=null==(t=navigator.getGamepads)?void 0:t.bind(navigator);return null==n?(n=function(){return[null,null,null,null]},console.log("Gamepads not supported over non-https. See https://developer.mozilla.org/en-US/docs/Web/API/Gamepad"),setTimeout((()=>{e.dispatch({type:"GAMEPAD_SUPPORTED_STATUS",gamepadsSupported:!1})}),1e3)):setTimeout((()=>{e.dispatch({type:"GAMEPAD_SUPPORTED_STATUS",gamepadsSupported:!0})}),1e3),window.addEventListener("gamepaddisconnected",(t=>{const{gamepad:n}=t;Ft===n.index?(e.dispatch(It(Ft)),Ft=-1):Bt===n.index&&(e.dispatch(It(Bt)),Bt=-1)})),function t(){const s=n();if(0!==s.length){for(const t of n()){if(null===t||!t.connected)continue;const n=Ut.getFromGamepad(t);if(!Ut.isSupported(n))continue;const a=$t(t);let r,i;if(a.start&&a.a?(Ft=t.index,e.dispatch(Lt(1)),Bt===Ft&&(e.dispatch(It(2)),Bt=-1)):a.start&&a.b&&(Bt=t.index,e.dispatch(Lt(2)),Ft===Bt&&(e.dispatch(It(1)),Ft=-1)),-1!==Ft){const e=s[Ft];r=e?$t(e):Wt}else r=Wt;if(-1!==Bt){const e=s[Bt];i=e?$t(e):Wt}else i=Wt;e.dispatch(Pt(r,i))}requestAnimationFrame(t)}else setTimeout(t,500)}(),e=>t=>e(t)};let qt,Kt;const Yt=()=>(e,t)=>{const{isConnected:n}=t().socket;n&&(Kt=Date.now(),e({type:"GET_ROBOT_STATUS"}),setTimeout((()=>{e(Yt())}),1e3))},Xt=e=>t=>n=>{switch(n.type){case"CONNECT":qt=new WebSocket(`ws://${n.host}:${n.port}`),qt.onmessage=t=>{const n=JSON.parse(t.data);e.dispatch(n)},qt.onopen=()=>{e.dispatch(Nt(!0)),e.dispatch(Yt())},qt.onclose=()=>{e.dispatch(Nt(!1)),setTimeout((()=>e.dispatch(Mt(n.host,n.port))),500)};break;case"DISCONNECT":qt.close();break;case"RECEIVE_ROBOT_STATUS":{const s=Date.now()-Kt;e.dispatch((e=>({type:"RECEIVE_PING_TIME",pingTime:e}))(s)),t(n);break}case"RECEIVE_GAMEPAD_STATE":case"GET_ROBOT_STATUS":case"SAVE_CONFIG":case"GET_CONFIG":case"INIT_OP_MODE":case"START_OP_MODE":case"STOP_OP_MODE":{const{isConnected:s}=e.getState().socket;s&&qt.send(JSON.stringify(n)),t(n);break}default:t(n)}},Jt=e=>t=>n=>{switch(n.type){case"GET_LAYOUT_PRESET":{const t=localStorage.getItem("layoutPreset")||Ct.DEFAULT;e.dispatch(St(t));break}case"SAVE_LAYOUT_PRESET":localStorage.setItem("layoutPreset",n.preset),e.dispatch(St(n.preset));break;default:t(n)}},Zt=[{timestamp:0,data:{},log:[],fieldOverlay:{ops:[]}}],Qt={isConnected:!1,pingTime:0},en=(e,t)=>{if(t.__type===le.CUSTOM){const n={__type:le.CUSTOM,__value:{}};for(const s of Object.keys(t.__value)){let a={};a="object"==typeof e.__value?e.__value[s]:{},n.__value[s]=en(a,t.__value[s])}return n}return(e=e).__modified?{__type:t.__type,__value:t.__value,__newValue:e.__newValue,__valid:e.__valid,__modified:!0,__enumClass:t.__enumClass,__enumValues:t.__enumValues}:{__type:t.__type,__value:t.__value,__newValue:t.__value,__valid:!0,__modified:!1,__enumClass:t.__enumClass,__enumValues:t.__enumValues}},tn=(e,t,n)=>{if(e.__type===le.CUSTOM){const s={__type:le.CUSTOM,__value:{}};for(const a of Object.keys(e.__value))"object"==typeof t.__value&&a in t.__value?s.__value[a]=tn(e.__value[a],t.__value[a],n):s.__value[a]=r.cloneDeep(e.__value[a]);return s}{let s=!0;return"object"!=typeof t.__value&&(s=t.__valid),{__type:e.__type,__value:e.__value,__newValue:t.__value,__valid:s,__modified:n,__enumClass:e.__enumClass,__enumValues:e.__enumValues}}},nn=e=>{if(e.__type===le.CUSTOM){const t={__type:le.CUSTOM,__value:{}};for(const n of Object.keys(e.__value))t.__value[n]=nn(e.__value[n]);return t}return{__type:e.__type,__value:e.__value,__newValue:e.__value,__valid:!0,__modified:!1,__enumClass:e.__enumClass,__enumValues:e.__enumValues}},sn={configRoot:{}},an={available:!1,activeOpMode:"",activeOpModeStatus:be,opModeList:[],warningMessage:"",errorMessage:"",gamepadsSupported:!0},rn={imageStr:""},on={layoutPreset:Ct.DEFAULT},ln={gamepad1Connected:!1,gamepad2Connected:!1},cn=f({telemetry:(e=Zt,t)=>{switch(t.type){case"RECEIVE_TELEMETRY":return t.telemetry;default:return e}},socket:(t=Qt,n)=>{switch(n.type){case"RECEIVE_PING_TIME":return e(e({},t),{pingTime:n.pingTime});case"RECEIVE_CONNECTION_STATUS":return e(e({},t),{isConnected:n.isConnected});default:return t}},config:(t=sn,n)=>{switch(n.type){case"RECEIVE_CONFIG":return e(e({},t),{configRoot:en(t.configRoot,n.configRoot)});case"UPDATE_CONFIG":return e(e({},t),{configRoot:tn(t.configRoot,n.configDiff,!0)});case"SAVE_CONFIG":return e(e({},t),{configRoot:tn(t.configRoot,n.configDiff,!1)});case"REFRESH_CONFIG":return e(e({},t),{configRoot:nn(t.configRoot)});default:return t}},status:(t=an,n)=>{switch(n.type){case"RECEIVE_ROBOT_STATUS":return e(e({},t),n.status);case"RECEIVE_OP_MODE_LIST":return e(e({},t),{opModeList:n.opModeList});case"GAMEPAD_SUPPORTED_STATUS":return e(e({},t),{gamepadsSupported:n.gamepadsSupported});default:return t}},camera:(t=rn,n)=>{switch(n.type){case"RECEIVE_IMAGE":return e(e({},t),{imageStr:n.imageString});default:return t}},settings:(t=on,n)=>{switch(n.type){case"RECEIVE_LAYOUT_PRESET":return e(e({},t),{layoutPreset:n.preset});default:return t}},gamepad:(t=ln,n)=>{switch(n.type){case"GAMEPAD_CONNECTED":return 1===n.user?e(e({},t),{gamepad1Connected:!0}):e(e({},t),{gamepad2Connected:!0});case"GAMEPAD_DISCONNECTED":return 1===n.user?e(e({},t),{gamepad1Connected:!1}):e(e({},t),{gamepad2Connected:!1});default:return t}}});const dn=v(cn,E(w,jt,Xt,Jt));c.render(n.createElement(y,{store:dn},n.createElement(kt,null)),document.getElementById("root"));
